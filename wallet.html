<!DOCTYPE html>
<html>
<head>
  <title>Wallet</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<h2 style="text-align:center">Your Wallet</h2>

<p style="text-align:center;font-size:20px">
  Points: <span id="walletPoints">0</span>
</p>

<script type="module">
  import { auth, db } from "./js/firebase.js";
  import { ref, onValue } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-database.js";
  import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";

  onAuthStateChanged(auth, user => {
    if (!user) location.href = "index.html";

    const userRef = ref(db, "users/" + user.uid);
    onValue(userRef, snap => {
      document.getElementById("walletPoints").innerText =
        snap.val()?.points || 0;
    });
  });
</script>

</body>
</html>
